<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-fab/paper-fab.html">
<link rel="import" href="../iron-icons/notification-icons.html">
<link rel="import" href="../neon-animations/web-animations.html">

<!--
An element representing the restart signal for a device

Example:

    <seed-element></seed-element>

@demo
-->
<dom-module id="seed-element">

  <style>
    paper-fab {
      background: orange; // init & rebooting state
    }
  </style>

  <template>
    <paper-fab class="restart" id="device-power" onclick="rotateOut()" icon="notification:power"></paper-fab>
  
  </template>

</dom-module>
<script>

  Polymer({

    is: 'seed-element',
    
  properties: {
    device_id: Number,
    device_name: String,
    location: String
   }
    
  });
  
  function rotateOut() {
    var elem = document.querySelector('.restart');
    var transformOrigin = elem.style['transform-origin'];
    var keyframes = [
      {transform: 'none', opacity: '1', transformOrigin: 'center', offset: 0}, 
      {transform: 'rotate3d(0, 0, 1, 200deg)', opacity: '0', transformOrigin: 'center', offset: 1}
    ];
    var timing = {duration: 900, iterations: 3};
    
    elem.animate(keyframes, timing);
    var rotate = elem.animate(keyframes, timing); 
    //send restart signal here & call rotate.finish() when signal recieved or timed out
    
    rotate.onfinish = function() {
    // device powered on.. we'll want to detect timeout and color red
      elem.style.background = "green";
    }
  }
</script>
